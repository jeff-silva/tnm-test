import{_ as Q}from"./BG7N9z_6.js";import{a as U}from"./B6pnJV86.js";import{u as F,E as q,I as B,r as P,J as X,h as $,K as Y,L as Z,m as ee,M as te,q as ne,z as re,v as J,w as x,n as E,o as C,b as A,c as M,B as oe,F as se,a as g,t as T,x as ie}from"./sq3CTQa_.js";function ae(e){return Y()?(Z(e),!0):!1}function V(e){return typeof e=="function"?e():F(e)}const ue=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ce=Object.prototype.toString,le=e=>ce.call(e)==="[object Object]",fe=()=>{};function de(e,n){function t(...o){return new Promise((s,u)=>{Promise.resolve(e(()=>n.apply(this,o),{fn:n,thisArg:this,args:o})).then(s).catch(u)})}return t}const G=e=>e();function pe(e=G){const n=P(!0);function t(){n.value=!1}function o(){n.value=!0}const s=(...u)=>{n.value&&e(...u)};return{isActive:X(n),pause:t,resume:o,eventFilter:s}}function me(e){return ee()}function _e(e,n,t={}){const{eventFilter:o=G,...s}=t;return $(e,de(o,n),s)}function he(e,n,t={}){const{eventFilter:o,...s}=t,{eventFilter:u,pause:d,resume:m,isActive:_}=pe(o);return{stop:_e(e,n,{...s,eventFilter:u}),pause:d,resume:m,isActive:_}}function ye(e,n=!0,t){me()?q(e,t):n?e():B(e)}function ge(e){var n;const t=V(e);return(n=t==null?void 0:t.$el)!=null?n:t}const j=ue?window:void 0;function z(...e){let n,t,o,s;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,o,s]=e,n=j):[n,t,o,s]=e,!n)return fe;Array.isArray(t)||(t=[t]),Array.isArray(o)||(o=[o]);const u=[],d=()=>{u.forEach(i=>i()),u.length=0},m=(i,c,v,p)=>(i.addEventListener(c,v,p),()=>i.removeEventListener(c,v,p)),_=$(()=>[ge(n),V(s)],([i,c])=>{if(d(),!i)return;const v=le(c)?{...c}:c;u.push(...t.flatMap(p=>o.map(b=>m(i,p,b,v))))},{immediate:!0,flush:"post"}),f=()=>{_(),d()};return ae(f),f}const O=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},N="__vueuse_ssr_handlers__",ve=we();function we(){return N in O||(O[N]=O[N]||{}),O[N]}function be(e,n){return ve[e]||n}function Se(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const xe={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},L="vueuse-storage";function Ee(e,n,t,o={}){var s;const{flush:u="pre",deep:d=!0,listenToStorageChanges:m=!0,writeDefaults:_=!0,mergeDefaults:f=!1,shallow:i,window:c=j,eventFilter:v,onError:p=r=>{console.error(r)},initOnMounted:b}=o,h=(i?te:P)(typeof n=="function"?n():n);if(!t)try{t=be("getDefaultStorage",()=>{var r;return(r=j)==null?void 0:r.localStorage})()}catch(r){p(r)}if(!t)return h;const y=V(n),W=Se(y),w=(s=o.serializer)!=null?s:xe[W],{pause:H,resume:k}=he(h,()=>I(h.value),{flush:u,deep:d,eventFilter:v});c&&m&&ye(()=>{t instanceof Storage?z(c,"storage",S):z(c,L,R),b&&S()}),b||S();function D(r,a){if(c){const l={key:e,oldValue:r,newValue:a,storageArea:t};c.dispatchEvent(t instanceof Storage?new StorageEvent("storage",l):new CustomEvent(L,{detail:l}))}}function I(r){try{const a=t.getItem(e);if(r==null)D(a,null),t.removeItem(e);else{const l=w.write(r);a!==l&&(t.setItem(e,l),D(a,l))}}catch(a){p(a)}}function K(r){const a=r?r.newValue:t.getItem(e);if(a==null)return _&&y!=null&&t.setItem(e,w.write(y)),y;if(!r&&f){const l=w.read(a);return typeof f=="function"?f(l,y):W==="object"&&!Array.isArray(l)?{...y,...l}:l}else return typeof a!="string"?a:w.read(a)}function S(r){if(!(r&&r.storageArea!==t)){if(r&&r.key==null){h.value=y;return}if(!(r&&r.key!==e)){H();try{(r==null?void 0:r.newValue)!==w.write(h.value)&&(h.value=K(r))}catch(a){p(a)}finally{r?B(k):k()}}}}function R(r){S(r.detail)}return h}const Ce=()=>{const e=ne({result:re(()=>{const n=e.items.reduce((o,s)=>o+s.item.amount*s.quantity,0),t=e.items.reduce((o,s)=>o+s.quantity,0);return{total:n,items:t}}),items:Ee("shop_cart_items",[]),add(n){const t=e.productExists(n);if(t){t.quantity++;return}e.items.push({quantity:1,item:n})},remove(n){},productExists(n){return e.items.filter(o=>o.item.id==n.id)[0]??null}});return e},Ae={class:"rounded border"},Oe={class:"bg-grey-lighten-3 pa-2",style:{height:"300px"}},Ne=["src"],Fe={class:"pa-3"},je={class:"d-flex ga-2"},Ve={class:"flex-grow-1"},We={class:"flex-grow-1"},Me={__name:"index",setup(e){const n=U(),t=Ce();return q(()=>{n.list.submit()}),(o,s)=>{const u=E("v-btn"),d=E("v-col"),m=E("v-row"),_=E("v-container"),f=Q;return C(),J(f,{name:"site"},{default:x(()=>[A(_,null,{default:x(()=>[A(m,null,{default:x(()=>[(C(!0),M(se,null,oe(F(n).list.data,i=>(C(),J(d,{cols:"3"},{default:x(()=>[g("div",Ae,[g("div",Oe,[i.thumbnail?(C(),M("img",{key:0,src:i.thumbnail,alt:"",style:{width:"100%",height:"100%","object-fit":"contain"}},null,8,Ne)):ie("",!0)]),g("div",Fe,T(i.name),1),g("div",je,[g("div",Ve,[A(u,{block:"",text:"Ver",color:"primary",rounded:"0",to:`/product/${i.sku}`},null,8,["to"])]),g("div",We,[A(u,{block:"",text:"Cart",color:"primary",rounded:"0",onClick:c=>F(t).add(i)},null,8,["onClick"])])])])]),_:2},1024))),256))]),_:1}),g("pre",null,"shopCart: "+T(F(t)),1)]),_:1})]),_:1})}}};export{Me as default};
