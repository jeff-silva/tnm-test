import{u as L,A as P,af as x,r as D,ay as B,h as T,az as G,aA as H,m as R,aB as I,q as K,B as $}from"./8BP2d5Us.js";function Q(e){return G()?(H(e),!0):!1}function _(e){return typeof e=="function"?e():L(e)}const U=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const X=Object.prototype.toString,Y=e=>X.call(e)==="[object Object]",Z=()=>{};function k(e,n){function t(...i){return new Promise((o,u)=>{Promise.resolve(e(()=>n.apply(this,i),{fn:n,thisArg:this,args:i})).then(o).catch(u)})}return t}const z=e=>e();function ee(e=z){const n=D(!0);function t(){n.value=!1}function i(){n.value=!0}const o=(...u)=>{n.value&&e(...u)};return{isActive:B(n),pause:t,resume:i,eventFilter:o}}function te(e){return R()}function ne(e,n,t={}){const{eventFilter:i=z,...o}=t;return T(e,k(i,n),o)}function re(e,n,t={}){const{eventFilter:i,...o}=t,{eventFilter:u,pause:y,resume:w,isActive:h}=ee(i);return{stop:ne(e,n,{...o,eventFilter:u}),pause:y,resume:w,isActive:h}}function ie(e,n=!0,t){te()?P(e,t):n?e():x(e)}function oe(e){var n;const t=_(e);return(n=t==null?void 0:t.$el)!=null?n:t}const O=U?window:void 0;function W(...e){let n,t,i,o;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,i,o]=e,n=O):[n,t,i,o]=e,!n)return Z;Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]);const u=[],y=()=>{u.forEach(c=>c()),u.length=0},w=(c,a,g,f)=>(c.addEventListener(a,g,f),()=>c.removeEventListener(a,g,f)),h=T(()=>[oe(n),_(o)],([c,a])=>{if(y(),!c)return;const g=Y(a)?{...a}:a;u.push(...t.flatMap(f=>i.map(b=>w(c,f,b,g))))},{immediate:!0,flush:"post"}),p=()=>{h(),y()};return Q(p),p}const A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},E="__vueuse_ssr_handlers__",se=ae();function ae(){return E in A||(A[E]=A[E]||{}),A[E]}function ue(e,n){return se[e]||n}function le(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const ce={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},j="vueuse-storage";function fe(e,n,t,i={}){var o;const{flush:u="pre",deep:y=!0,listenToStorageChanges:w=!0,writeDefaults:h=!0,mergeDefaults:p=!1,shallow:c,window:a=O,eventFilter:g,onError:f=r=>{console.error(r)},initOnMounted:b}=i,d=(c?I:D)(typeof n=="function"?n():n);if(!t)try{t=ue("getDefaultStorage",()=>{var r;return(r=O)==null?void 0:r.localStorage})()}catch(r){f(r)}if(!t)return d;const m=_(n),F=le(m),S=(o=i.serializer)!=null?o:ce[F],{pause:J,resume:N}=re(d,()=>M(d.value),{flush:u,deep:y,eventFilter:g});a&&w&&ie(()=>{t instanceof Storage?W(a,"storage",v):W(a,j,V),b&&v()}),b||v();function C(r,s){if(a){const l={key:e,oldValue:r,newValue:s,storageArea:t};a.dispatchEvent(t instanceof Storage?new StorageEvent("storage",l):new CustomEvent(j,{detail:l}))}}function M(r){try{const s=t.getItem(e);if(r==null)C(s,null),t.removeItem(e);else{const l=S.write(r);s!==l&&(t.setItem(e,l),C(s,l))}}catch(s){f(s)}}function q(r){const s=r?r.newValue:t.getItem(e);if(s==null)return h&&m!=null&&t.setItem(e,S.write(m)),m;if(!r&&p){const l=S.read(s);return typeof p=="function"?p(l,m):F==="object"&&!Array.isArray(l)?{...m,...l}:l}else return typeof s!="string"?s:S.read(s)}function v(r){if(!(r&&r.storageArea!==t)){if(r&&r.key==null){d.value=m;return}if(!(r&&r.key!==e)){J();try{(r==null?void 0:r.newValue)!==S.write(d.value)&&(d.value=q(r))}catch(s){f(s)}finally{r?x(N):N()}}}}function V(r){v(r.detail)}return d}const de=()=>{const e=K({result:$(()=>{const n=e.items.reduce((i,o)=>i+o.item.amount*o.quantity,0),t=e.items.reduce((i,o)=>i+o.quantity,0);return{total:n,items:t}}),items:fe("shop_cart_items",[]),add(n){const t=e.productExists(n);if(t){t.quantity++;return}e.items.push({quantity:1,item:n})},remove(n){for(let t in e.items)e.items[t].item.id==n.id&&e.items.splice(t,1)},productExists(n){return e.items.filter(i=>i.item.id==n.id)[0]??null}});return e};export{de as u};
